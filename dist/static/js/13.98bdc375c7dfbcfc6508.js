webpackJsonp([13],{HsiX:function(t,e){},k6mo:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("TToO"),i=s("7+uW"),a=s("c+8m"),n=s.n(a),l=s("gN+L"),d=s("DZ+H"),r=s("TJML"),c=s("ymRw"),u=s("ipus"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.goodsList=[],e.goodsId="",e.detatil={goodsImg:"",goodsName:"",jingle:"",labelPrice:0,marketPrice:0,onlineStatus:"",sku:[],skuKey:[],storageNum:0},e.pageType="add",e.num=1,e.keepModel=!1,e.skuattr=[],e.chosenList=[],e.skuItem={},e}return o.c(e,t),e.prototype.onClickMiniBtn=function(){},e.prototype.onClickBigBtn=function(){},e.prototype.addCar=function(){var t=this;this.skuItem.skuId&&("pay"===this.pageType&&i.default.prototype.$reqFormPost("/prepare/order/direct",{userId:this.$store.getters[i.default.prototype.MutationTreeType.TOKEN_INFO].userId,token:this.$store.getters[i.default.prototype.MutationTreeType.TOKEN_INFO].token,goodsId:this.goodsId,skuId:this.skuItem.skuId,num:this.num},function(e){if(null!=e){if(console.log(e),200!=e.data.status)return console.log("需控制错误码"+e.data.status+",错误信息："+e.data.message),void Object(c.Toast)(e.data.message);t.setPrepareId(e.data.data.prepareId),t.$router.push({path:"/settle"}),console.log("预支付订单ID",e.data.data.prepareId)}else console.log("网络请求错误！")}),console.log(this.pageType))},e.prototype.changeModel=function(t){t&&(this.pageType=t),this.keepModel=!this.keepModel},e.prototype.selectSku=function(t,e){var s=this;if(!e.disable){""!=(this.chosenList[t]||"")&&this.chosenList[t]===e.skuValueId?this.chosenList[t]="":this.chosenList[t]=e.skuValueId,this.chosenList=this.chosenList,this.skuItem={};if(this.detatil.skuKey.forEach(function(t,e){t.valueList.forEach(function(t,o){t.disable=!0;for(var i=0;i<s.detatil.sku.length;i++)if(s.detatil.sku[i].attrs[e].valueId==t.skuValueId){for(var a=!0,n=0;n<s.detatil.sku[i].attrs.length;n++)if(e!=n&&""!=(s.chosenList[n]||"")&&s.chosenList[n]!=s.detatil.sku[i].attrs[n].valueId){a=!1;break}if(a){t.disable=!1;break}}})}),this.chosenList.length===this.detatil.skuKey.length){if(function(){var t=!0;return s.chosenList.forEach(function(e,s){if(""===e)return t=!1,!1}),t})for(var o=0;o<this.detatil.sku.length;o++)for(var i=0,a=0;a<this.chosenList.length;a++)if(this.chosenList[a]===this.detatil.sku[o].attrs[a].valueId&&(console.log(this.chosenList[a]===this.detatil.sku[o].attrs[a].valueId,this.detatil.sku[o].attrs[a]),(i+=1)===this.chosenList.length)){this.skuItem=this.detatil.sku[o];break}}this.chosenList.push(),console.log(this.skuItem)}},e.prototype.addCart=function(){i.default.prototype.$reqFormPost("/shop/cart/add",{userId:this.$store.getters[i.default.prototype.MutationTreeType.TOKEN_INFO].userId,token:this.$store.getters[i.default.prototype.MutationTreeType.TOKEN_INFO].token,goodsId:this.goodsId,skuId:this.detatil.sku[0].skuId},function(t){null!=t?200==t.data.status?console.log("加入购物车",t.data):console.log("需控制错误码"+t.data.status+",错误信息："+t.data.message):console.log("网络请求错误！")})},e.prototype.getProductDetail=function(){var t=this;i.default.prototype.$reqFormPost("/goods/front/detail",{userId:this.$store.getters[i.default.prototype.MutationTreeType.TOKEN_INFO].userId,token:this.$store.getters[i.default.prototype.MutationTreeType.TOKEN_INFO].token,goodsId:this.goodsId},function(e){null!=e?200==e.data.status?(e.data.data.singleStatus&&(t.skuItem=e.data.data.sku[0]),t.detatil=e.data.data,t.detatil.skuKey.forEach(function(e,s){e.valueList.forEach(function(e,o){var i={disable:!0,chosen:!1};t.detatil.sku.forEach(function(t,o){if(e.skuValueId===t.attrs[s].valueId)return i.disable=!1,!1}),Object.assign(e,i)})})):console.log("需控制错误码"+e.data.status+",错误信息："+e.data.message):console.log("网络请求错误！")})},e.prototype.mounted=function(){console.log(this.$store.getters[i.default.prototype.MutationTreeType.TOKEN_INFO]),this.goodsId=this.$route.query.goodsId,this.getProductDetail(),console.log("----------------------")},o.b([Object(u.a)("setPrepareId")],e.prototype,"setPrepareId",void 0),e=o.b([n()({components:{Swipe:l.a,comhead:r.a},mixins:[d.a]})],e)}(i.default),g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tab-contents",staticStyle:{width:"100%","background-color":"#e4e4e4",overflow:"auto",height:"100vh"}},[s("comhead",{ref:"comhead",attrs:{isLeftIcon:"icon-zuo",leftIconName:"angle-left",title:"商品详情",isRightIcon:"true"},on:{leftClick:!1}}),t._v(" "),s("van-swipe",{attrs:{autoplay:3e3}},t._l(t.detatil.goodsImg.split(","),function(t,e){return s("van-swipe-item",{key:e,staticStyle:{height:"300px",display:"flex","align-items":"center","justify-content":"center"}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t,expression:"image"}]})])})),t._v(" "),s("div",{staticClass:"goodsTitle"},[s("div",{staticClass:"goodstitle"},[s("div",[t._v(t._s(t.detatil.goodsName))]),t._v(" "),s("div",{staticStyle:{"font-size":"14px",color:"#666"}},[t._v(t._s(t.detatil.jingle))]),t._v(" "),s("div",[s("span",{staticClass:"marketPrice"},[t._v("  ￥"+t._s(t.detatil.marketPrice))]),t._v(" "),s("span",{staticClass:"labelPrice",staticStyle:{margin:"0 10px","font-size":"14px"}},[t._v("原价:"+t._s(t.detatil.labelPrice))])])]),t._v(" "),s("div",{staticClass:"comment"})]),t._v(" "),s("van-goods-action",[s("van-goods-action-mini-btn",{attrs:{icon:"chat",text:"客服"},on:{click:t.onClickMiniBtn}}),t._v(" "),s("van-goods-action-mini-btn",{attrs:{icon:"cart",text:"购物车"},on:{click:t.onClickMiniBtn}}),t._v(" "),s("van-goods-action-big-btn",{attrs:{text:"加入购物车"},on:{click:function(e){t.changeModel("cart")}}}),t._v(" "),s("van-goods-action-big-btn",{attrs:{text:"立即购买",primary:""},on:{click:function(e){t.changeModel("pay")}}})],1),t._v(" "),s("div",{class:t.keepModel?"bg_shop1":"bg_shop_none1",staticStyle:{"background-color":"rgba(0, 0, 0, 0.498039)",height:"100%",width:"100%"},on:{click:function(e){t.changeModel()}}},[s("div",{staticStyle:{position:"relative",width:"100%",height:"100%"}},[s("div",{class:t.keepModel?"modiaBoxUp2":"modiaBoxDown2",staticStyle:{"background-color":"#fff",width:"100%"},on:{click:function(t){t.stopPropagation()}}},[s("div",{staticStyle:{"border-bottom":"1px solid #e5e5e5",display:"flex","margin-left":"15px","justify-content":"space-between"}},[s("div",{staticStyle:{padding:"6px","margin-top":"-35px","border-radius":"5px","background-color":"#fff",border:"1px solid #e5e5e5","margin-bottom":"20px",display:"flex"}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.skuItem.skuImgUrl?t.skuItem.skuImgUrl:t.detatil.goodsImg.split(",")[0],expression:"skuItem.skuImgUrl?skuItem.skuImgUrl :detatil['goodsImg'].split(',')[0]"}],staticStyle:{width:"80px",height:"80px"}})]),t._v(" "),s("div",{staticStyle:{"font-size":"13px",flex:"1"}},[s("div",{staticStyle:{"font-size":"16px"}},[t._v(t._s(t.detatil.goodsName))]),t._v(" "),s("div",{staticStyle:{color:"#666"}},[t._v(t._s(t.detatil.jingle))]),t._v(" "),s("div",{staticStyle:{margin:"10px",height:"40px",overflow:"hidden","font-size":"14px"}},[t._v("单价:\n          "),s("span",{staticStyle:{"font-size":"18px",color:"rgb(229, 28, 35)"}},[t._v("￥"+t._s(t.skuItem.marketPrice?t.skuItem.marketPrice:t.detatil.marketPrice))])])]),t._v(" "),s("div",{staticStyle:{padding:"10px"}})]),t._v(" "),s("div",{staticStyle:{"font-size":"14px","max-height":"300px",overflow:"auto"}},t._l(t.detatil.skuKey,function(e,o){return s("div",[s("div",{staticStyle:{padding:"5px 20px 0"}},[t._v(t._s(e.skuKeyIdName))]),t._v(" "),s("div",{staticClass:"skuKeyBox"},t._l(e.valueList,function(e,i){return s("div",[s("div",{class:t.chosenList[o]===e?"sku_box_select":"sku_box",style:e.disable?"color:#ccc;":""+t.chosenList[o]===e.skuValueId?"background-color:#E41C24;color:#fff":"",on:{click:function(s){s.stopPropagation(),t.selectSku(o,e)}}},[t._v(t._s(e.skuValueName))])])}))])})),t._v(" "),s("div",{staticClass:"num_box"},[s("div",{staticStyle:{display:"flex","align-items":"center"}},[t._v("数量：")]),t._v(" "),s("van-stepper",{staticStyle:{float:"right"},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}})],1),t._v(" "),s("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center",width:"100%",color:"#fff","background-color":"rgb(229, 28, 35)"},on:{click:t.addCar}},[s("div",{staticStyle:{margin:"10px"}},[t._v("确定")])])])])])],1)},staticRenderFns:[]};var h=s("VU/8")(p,g,!1,function(t){s("HsiX")},"data-v-222c3d46",null);e.default=h.exports}});
//# sourceMappingURL=13.98bdc375c7dfbcfc6508.js.map