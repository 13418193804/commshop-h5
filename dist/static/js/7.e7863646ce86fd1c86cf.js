webpackJsonp([7],{"+KtI":function(t,e){},JblN:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("TToO"),s=o("7+uW"),r=o("c+8m"),i=o.n(r),n=o("gN+L"),c=o("DZ+H"),l=o("ipus"),u=o("TJML"),d=o("ymRw"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.result=[],e.cartList=[],e.totalMoney=0,e}return a.c(e,t),e.prototype.onSubmit=function(){var t=this;s.default.prototype.$reqFormPost("/prepare/order/add",{userId:this.$store.getters[s.default.prototype.MutationTreeType.TOKEN_INFO].userId,token:this.$store.getters[s.default.prototype.MutationTreeType.TOKEN_INFO].token,cartIdList:this.result.join(",")},function(e){if(null!=e){if(console.log(e),200!=e.data.status)return console.log("需控制错误码"+e.data.status+",错误信息："+e.data.message),void Object(d.Toast)(e.data.message);t.setPrepareId(e.data.data.prepareId),t.$router.push({path:"/settle"}),console.log("预支付订单ID",e.data.prepareId)}else console.log("网络请求错误！")})},e.prototype.deleteCart=function(t){this.cartList.splice(t,1)},e.prototype.collect=function(){Object(d.Toast)("收藏成功")},e.prototype.getCartList=function(){var t=this;s.default.prototype.$reqFormPost("/shop/cart/query",{userId:this.$store.getters[s.default.prototype.MutationTreeType.TOKEN_INFO].userId,token:this.$store.getters[s.default.prototype.MutationTreeType.TOKEN_INFO].token},function(e){null!=e?200==e.data.status?(console.log("查询购物车",e.data),t.cartList=e.data.data.carts):console.log("需控制错误码"+e.data.status+",错误信息："+e.data.message):console.log("网络请求错误！")})},e.prototype.mounted=function(){this.setTabIndex(2),this.getCartList()},a.b([Object(l.a)("setPrepareId")],e.prototype,"setPrepareId",void 0),a.b([Object(l.a)("setTabIndex")],e.prototype,"setTabIndex",void 0),e=a.b([i()({components:{Swipe:n.a,comhead:u.a},mixins:[c.a]})],e)}(s.default),v={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"tab-contents"},[o("comhead",{ref:"comhead",attrs:{title:"购物车",isRightIcon:"true"}}),t._v(" "),o("van-checkbox-group",{model:{value:t.result,callback:function(e){t.result=e},expression:"result"}},t._l(t.cartList,function(e,a){return o("van-cell-swipe",{attrs:{"right-width":130}},[o("van-cell-group",[o("div",{staticClass:"cartItem"},[o("van-checkbox",{attrs:{name:e.id}}),t._v(" "),o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.goodsImg.split(",")[0],expression:"item.goodsImg.split(',')[0]"}],staticStyle:{width:"90px",height:"90px"}}),t._v(" "),o("div",{staticStyle:{flex:"1",padding:"0 10px"}},[o("div",[t._v(t._s(e.goodsName))]),t._v(" "),o("div",{staticStyle:{"font-size":"14px",color:"#666"}},[t._v(t._s(e.goodsName))]),t._v(" "),o("div",{staticStyle:{color:"red"}},[t._v("￥"+t._s(e.price))]),t._v(" "),o("van-stepper",{staticStyle:{float:"right"},model:{value:e.num,callback:function(o){t.$set(e,"num",o)},expression:"item.num"}})],1)],1)]),t._v(" "),o("span",{staticClass:"van-cell-swipe__right",attrs:{slot:"right"},on:{click:function(e){t.deleteCart()}},slot:"right"},[t._v("删除")]),t._v(" "),o("div",{staticClass:"collect",staticStyle:{"background-color":"#f90",width:"100%",height:"100%",display:"flex","align-items":"center","justify-content":"center"},attrs:{slot:"right"},on:{click:function(e){t.collect()}},slot:"right"},[t._v("收藏")])],1)})),t._v(" "),o("div",{staticStyle:{height:"99px"}}),t._v(" "),o("van-submit-bar",{staticStyle:{"margin-bottom":"50px"},attrs:{price:t.totalMoney,"button-text":"提交订单"},on:{submit:t.onSubmit}},[o("van-checkbox",{model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("全选")])],1)],1)},staticRenderFns:[]};var h=o("VU/8")(p,v,!1,function(t){o("+KtI"),o("Vq7k")},"data-v-0e86e093",null);e.default=h.exports},Vq7k:function(t,e){}});
//# sourceMappingURL=7.e7863646ce86fd1c86cf.js.map