webpackJsonp([23],{"0yFl":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("TToO"),s=a("7+uW"),n=a("c+8m"),r=a.n(n),o=a("DZ+H"),d=a("ymRw"),l=a("TJML"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.orderId="",e.detail="",e.refundObj={refundType:"REFUND",refundImgs:[],reason:""},e}return i.c(e,t),e.prototype.changerefundType=function(t){this.refundObj.refundType=t},e.prototype.doRefund=function(){var t=this,e="/order/refund/apply",a=Object.assign({refundImgs:this.refundObj.refundImgs.join(","),userId:this.$store.getters[s.default.prototype.MutationTreeType.TOKEN_INFO].userId,token:this.$store.getters[s.default.prototype.MutationTreeType.TOKEN_INFO].token,orderId:this.orderId,money:this.detail.payTotal},this.refundObj);"FAIL_REFUND"==this.detail.detailList[0].refundStatus&&(e="/order/refund/reapply",a=Object.assign({refundImgs:this.refundObj.refundImgs.join(","),userId:this.$store.getters[s.default.prototype.MutationTreeType.TOKEN_INFO].userId,token:this.$store.getters[s.default.prototype.MutationTreeType.TOKEN_INFO].token,refundId:this.detail.detailList[0].refundOrderList[0].refundId,money:this.detail.payTotal},this.refundObj)),s.default.prototype.$reqFormPost(e,a,function(e){if(null!=e){if(200!=e.data.status)return console.log("需控制错误码"+e.data.status+",错误信息："+e.data.message),void Object(d.Toast)(e.data.message);Object(d.Toast)("申请成功"),console.log("申请退款后",e.data),t.$router.go(-1)}else console.log("网络请求错误！")})},e.prototype.removeByValue=function(t,e){for(var a=0;a<t.length;a++)if(t[a]==e){t.splice(a,1);break}},e.prototype.onRead=function(t){var e=this;console.log();var a=new FormData;a.append("file",t.file),s.default.prototype.$reqFormUpload("/fileupload",a,function(t){if(null!=t){if(200!=t.data.status)return console.log("需控制错误码"+t.data.status+",错误信息："+t.data.message),void Object(d.Toast)(t.data.message);var a=e.refundObj.refundImgs?e.refundObj.refundImgs:[];a.push(t.data.data.filename),e.refundObj.refundImgs=a,console.log("文件上传",t.data.data.filename)}else console.log("网络请求错误！")})},e.prototype.formatStatus=function(t){switch(t){case"ORDER_WAIT_PAY":return"未付款";case"ORDER_CANCEL_PAY":return"已取消";case"ORDER_WAIT_SENDGOODS":return"未发货";case"ORDER_WAIT_RECVGOODS":return"未收货";case"ORDER_END_GOODS":return"交易结束";case"ORDER_WAIT_REVIEW":return"交易完成"}},e.prototype.queryDetail=function(){var t=this;s.default.prototype.$reqFormPost("/order/queryorderdetail",{userId:this.$store.getters[s.default.prototype.MutationTreeType.TOKEN_INFO].userId,token:this.$store.getters[s.default.prototype.MutationTreeType.TOKEN_INFO].token,orderId:this.orderId},function(e){if(null!=e){if(200!=e.data.status)return console.log("需控制错误码"+e.data.status+",错误信息："+e.data.message),void Object(d.Toast)(e.data.message);t.detail=e.data.data,console.log(e.data.data)}else console.log("网络请求错误！")})},e.prototype.formatStatusColor=function(t){switch(t){case"ORDER_WAIT_SENDGOODS":case"ORDER_WAIT_RECVGOODS":case"ORDER_CANCEL_PAY":case"ORDER_WAIT_PAY":return"color:red";case"ORDER_WAIT_REVIEW":return"color:#ffc630";case"ORDER_FINISH":return"color:#ffc630;"}},e.prototype.mounted=function(){console.log("退款页面"),this.orderId=this.$route.query.orderId,this.queryDetail()},e=i.b([r()({components:{comhead:l.a},mixins:[o.a]})],e)}(s.default),u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab-contents",staticStyle:{height:"-webkit-fill-available"}},[a("comhead",{ref:"comhead",attrs:{isLeftIcon:"icon-zuo",leftIconName:"angle-left",title:"申请售后",isRightIcon:"true"},on:{leftClick:!1}}),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"flex flex-align-center",staticStyle:{padding:"10px"}},[a("div",{staticStyle:{flex:"1"}},[a("div",{staticClass:"flex flex-pack-justify",staticStyle:{"font-size":"16px"}},[a("span",[t._v("收货人："+t._s(t.detail.contactName))]),t._v(" "),a("span",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(t.detail.contactPhone))])]),t._v(" "),a("div",{staticClass:"flex flex-align-center",staticStyle:{padding:"5px","font-size":"14px"}},[t._m(1),t._v(" "),a("div",{staticClass:"lineTwo"},[t._v("\n\n          收货地址： "+t._s(t.detail.provinceName)+t._s(t.detail.cityName)+t._s(t.detail.countryName)+t._s(t.detail.address)+"\n\n        ")])])])]),t._v(" "),a("div",{staticStyle:{height:"10px","background-color":"#f7f7f7"}}),t._v(" "),a("div",{},t._l(t.detail.detailList,function(e,i){return a("div",{key:i},[a("div",{staticClass:"product"},[a("div",{staticClass:"flex flex-align-center"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.goodsImg,expression:"item.goodsImg"}],staticStyle:{height:"70px",width:"70px"}})]),t._v(" "),a("div",{staticClass:"flex-1",staticStyle:{"font-size":"16px",overflow:"hidden",padding:"0 10px"}},[a("div",{staticStyle:{height:"100%"}},[a("div",{staticClass:"lineTwoType"},[t._v(t._s(e.goodsName))]),t._v(" "),a("div",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",color:"#999"}},[a("div",{staticStyle:{"font-size":"14px",color:"#666"}},[t._v(t._s(e.jingle))])])])]),t._v(" "),a("div",{staticStyle:{"text-align":"center","font-size":"14px"}},[a("div",[t._v("￥"+t._s(e.goodsPrice))]),t._v(" "),a("div",{staticClass:"labelPrice"},[t._v("￥"+t._s(e.goodsPrice))]),t._v(" "),a("div",[t._v("X "+t._s(e.goodsNum))])])])])})),t._v(" "),a("div",{},[a("div",{staticClass:"flex flex-pack-justify",staticStyle:{"margin-left":"10px","border-bottom":"1px #e5e5e5 solid",padding:"10px"}},[a("div",[t._v("运费")]),t._v(" "),a("div",{staticStyle:{"margin-right":"10px"}},[t._v("￥"+t._s(t.detail.transportPrice.toFixed(2)))])]),t._v(" "),a("div",{staticClass:"flex flex-pack-justify",staticStyle:{margin:"0 0 0 10px",padding:"10px"}},[a("div",[t._v("订单总价")]),t._v(" "),a("div",{staticClass:"marketPrice",staticStyle:{"margin-right":"10px"}},[t._v("￥"+t._s(t.detail.orderTotalPrice.toFixed(2)))])])]),t._v(" "),a("div",{staticStyle:{height:"10px","background-color":"#f7f7f7"}}),t._v(" "),a("div",{staticStyle:{padding:"10px","line-height":"24px"}},[a("div",[t._v("\n\n      订单号："+t._s(t.detail.orderId)+"\n\n    ")]),t._v(" "),a("div",[t._v("\n\n      创建时间："+t._s(t.detail.createTime)+"\n\n    ")]),t._v(" "),a("div",[t._v("\n\n      支付时间："+t._s(t.detail.payTime)+"\n\n    ")])]),t._v(" "),"FAIL_REFUND"==t.detail.detailList[0].refundStatus?a("div",{staticStyle:{height:"10px","background-color":"#f7f7f7"}}):t._e(),t._v(" "),"FAIL_REFUND"==t.detail.detailList[0].refundStatus?a("div",{staticStyle:{margin:"0 0 0 10px",padding:"10px"}},[a("div",[t._v("\n\n      退回原因\n\n    ")]),t._v(" "),a("p",{staticStyle:{color:"#999"}},[t._v("\n\n      "+t._s(t.detail.detailList[0].refundOrderList[0].merchantRemark)+"\n\n    ")])]):t._e(),t._v(" "),a("div",{staticStyle:{height:"10px","background-color":"#f7f7f7"}}),t._v(" "),a("div",{staticClass:"flex flex-pack-justify flex-align-center",staticStyle:{padding:"10px","font-size":"14px"}},[a("div",[t._v("服务时间：9:00 - 22:00")]),t._v(" "),a("van-button",{attrs:{size:"small",onclick:"showMeiQia()"}},[t._v("联系客服")])],1),t._v(" "),a("div",{staticStyle:{height:"10px","background-color":"#f7f7f7"}}),t._v(" "),a("div",{staticClass:"flex flex-pack-justify flex-align-center",staticStyle:{padding:"10px"}},[a("div",[t._v("售后类型")]),t._v(" "),a("div",{staticClass:"selectBox",class:"REFUND"==t.refundObj.refundType?"selectType":"",on:{click:function(e){t.changerefundType("REFUND")}}},[t._v("\n\n      未收到货，只退款\n\n    ")]),t._v(" "),a("div",{staticClass:"selectBox",class:"GOODS_RETURN"==t.refundObj.refundType?"selectType":"",on:{click:function(e){t.changerefundType("GOODS_RETURN")}}},[t._v("\n\n      退货/退款\n\n    ")])]),t._v(" "),a("div",{staticStyle:{border:"1px #e5e5e5 solid",margin:"10px","border-radius":"8px"}},[a("div",{staticStyle:{width:"100%","border-bottom":"1px #e5e5e5 solid",height:"43px","line-height":"43px",padding:"0 10px"}},[t._v("\n\n      提示：快递到达后请拒收快递，否则退款将被拒绝\n\n    ")]),t._v(" "),a("div",{staticStyle:{padding:"5px"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.refundObj.reason,expression:"refundObj.reason"}],staticStyle:{"vertical-align":"top",width:"100%",border:"none"},attrs:{placeholder:"请填写申请理由",type:"text",name:"content",rows:"9"},domProps:{value:t.refundObj.reason},on:{input:function(e){e.target.composing||t.$set(t.refundObj,"reason",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"flex",staticStyle:{margin:"10px"}},[a("div",{staticClass:"el-upload--picture-card"},[a("van-uploader",{staticClass:"flex flex-pack-center flex-align-center",staticStyle:{width:"100%",height:"100%"},attrs:{"after-read":t.onRead,accept:"image/jpg,image/png, image/jpeg"}},[a("van-icon",{attrs:{name:"photograph"}})],1)],1),t._v(" "),t._l(t.refundObj.refundImgs,function(e,i){return a("div",{key:i,staticClass:"el-upload--picture-card",staticStyle:{position:"relative"}},[a("img",{staticStyle:{width:"100%"},attrs:{src:e}}),t._v(" "),a("i",{staticClass:"iconfont icon-shanchu3",staticStyle:{color:"#000",position:"absolute",right:"-8px",top:"-8px",height:"17px","line-height":"17px"},on:{click:function(a){t.removeByValue(t.refundObj.refundImgs,e)}}})])})],2),t._v(" "),a("div",{staticStyle:{margin:"10px"}},[a("van-button",{attrs:{size:"large"},on:{click:function(e){t.doRefund()}}},[t._v("提交")])],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"flex",staticStyle:{height:"5px"}},[e("img",{staticStyle:{width:"100%"},attrs:{src:a("AQsh")}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("i",{staticClass:"iconfont icon-location",staticStyle:{"margin-right":"10px","font-size":"22px"}})])}]};var f=a("VU/8")(c,u,!1,function(t){a("qCya")},"data-v-a2397cd0",null);e.default=f.exports},qCya:function(t,e){}});
//# sourceMappingURL=23.ddf3ea50690bf77e81d2.js.map