webpackJsonp([33],{H9Nh:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("TToO"),s=a("7+uW"),n=a("c+8m"),o=a.n(n),l=a("DZ+H"),c=a("ymRw"),r=a("TJML"),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.goodsId="",e.status=0,e.commentList=[],e.stars=[{src:a("fL+S"),active:!1},{src:a("fL+S"),active:!1},{src:a("fL+S"),active:!1},{src:a("fL+S"),active:!1},{src:a("fL+S"),active:!1}],e.scale=0,e.pageindex=10,e.loading=!1,e}return i.c(e,t),e.prototype.tab=function(t){this.status=t,this.getcommentlist()},e.prototype.getProductDetail=function(){var t=this;s.default.prototype.$reqFormPost("/goods/front/detail",{userId:this.$store.getters[s.default.prototype.MutationTreeType.TOKEN_INFO].userId,token:this.$store.getters[s.default.prototype.MutationTreeType.TOKEN_INFO].token,goodsId:this.goodsId},function(e){if(null!=e){if(200!=e.data.status)return console.log("需控制错误码"+e.data.status+",错误信息："+e.data.message),void Object(c.Toast)(e.data.message);console.log("---------",e.data),t.scale=e.data.data.scale,t.getstars(e.data.data.commentStar)}else console.log("网络请求错误！")})},e.prototype.loadMore=function(){var t=this;this.loading=!0;setTimeout(function(){t.pageindex+=10,t.getcommentlist()},1e3)},e.prototype.getcommentlist=function(){var t=this;s.default.prototype.$reqFormPost("/comment/list",{goodsId:this.goodsId,status:this.status,page:0,pageSize:this.pageindex},function(e){if(null!=e){if(200!=e.data.status)return console.log("需控制错误码"+e.data.status+",错误信息："+e.data.message),void Object(c.Toast)(e.data.message);t.commentList=e.data.data.commentList,e.data.data.commentList.length!=t.pageindex&&(t.loading=!1)}else console.log("网络请求错误！")})},e.prototype.getstars=function(t){for(var e=0;e<t;e++)this.stars[e].src=a("PFYQ"),this.stars[e].active=!0},e.prototype.handlePX=function(t,e){return t+":"+this.$store.getters[s.default.prototype.MutationTreeType.SYSTEM].availWidth/750*e+"px;"},e.prototype.mounted=function(){this.goodsId=this.$route.query.goodsId,this.getcommentlist(),console.log("商品评论页"),this.getProductDetail()},e=i.b([o()({components:{comhead:r.a},mixins:[l.a]})],e)}(s.default),m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tab-contents",staticStyle:{height:"-webkit-fill-available","background-color":"#fafafa"}},[i("comhead",{ref:"comhead",attrs:{isLeftIcon:"icon-zuo",leftIconName:"angle-left",title:"评论"},on:{leftClick:!1}}),t._v(" "),i("div",{staticStyle:{"margin-bottom":"10px","background-color":"#ffffff"}},[i("div",{staticClass:"flex",staticStyle:{padding:"15px"}},[i("span",[t._v("评分")]),t._v(" "),i("div",{staticClass:"star-box",staticStyle:{margin:"0 10px"}},t._l(t.stars,function(e,a){return i("img",{key:a,style:t.handlePX("width",43)+t.handlePX("height",43),attrs:{src:e.src}})})),t._v(" "),i("span",[t._v(t._s(t.scale)+"%好评")])]),t._v(" "),i("div",{staticClass:"flex",staticStyle:{padding:"10px 15px"}},[i("div",{class:0==t.status?"tabConactive":"tabCon",on:{click:function(e){t.tab(0)}}},[t._v("全部")]),t._v(" "),i("div",{class:1==t.status?"tabConactive":"tabCon",staticStyle:{"margin-left":"10px"},on:{click:function(e){t.tab(1)}}},[t._v("有图")])])]),t._v(" "),i("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],attrs:{"infinite-scroll-disabled":t.loading,"infinite-scroll-distance":"20"}},t._l(t.commentList,function(e,s){return i("li",{key:s},[i("div",{staticStyle:{padding:"10px 15px","background-color":"#ffffff","border-bottom":"1px solid #fafafa"}},[i("div",[e.user.userIcon?i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.user.userIcon,expression:"item.user.userIcon"}],staticStyle:{"vertical-align":"middle","border-radius":"50%"},style:t.handlePX("width",65)+t.handlePX("height",65)}):i("img",{staticStyle:{"vertical-align":"middle","border-radius":"50%"},style:t.handlePX("width",65)+t.handlePX("height",65),attrs:{src:a("nqO4")}}),t._v(" "),i("span",[t._v(t._s(e.user.nickName))])]),t._v(" "),i("div",{staticStyle:{color:"#999999","font-size":"14px"}},[t._v(t._s(e.createTime)+"\n              "),t._l(JSON.parse(e.skuKeyValue),function(e){return i("span",{staticStyle:{margin:"0 5px"}},[t._v(t._s(e.key)+"："+t._s(e.value))])})],2),t._v(" "),i("div",{staticStyle:{padding:"5px 0"}},[t._v(t._s(e.commentContent))]),t._v(" "),e.commentImg?i("div",[e.commentImg.split(",")[0]?i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.commentImg.split(",")[0],expression:"item.commentImg.split(',')[0]"}],style:t.handlePX("width",148)+t.handlePX("height",148)}):t._e(),t._v(" "),e.commentImg.split(",")[1]?i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.commentImg.split(",")[1],expression:"item.commentImg.split(',')[1]"}],style:t.handlePX("width",148)+t.handlePX("height",148)}):t._e(),t._v(" "),e.commentImg.split(",")[2]?i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.commentImg.split(",")[2],expression:"item.commentImg.split(',')[2]"}],style:t.handlePX("width",148)+t.handlePX("height",148)}):t._e(),t._v(" "),e.commentImg.split(",")[3]?i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.commentImg.split(",")[3],expression:"item.commentImg.split(',')[3]"}],style:t.handlePX("width",148)+t.handlePX("height",148)}):t._e(),t._v(" "),e.commentImg.split(",")[4]?i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.commentImg.split(",")[4],expression:"item.commentImg.split(',')[4]"}],style:t.handlePX("width",148)+t.handlePX("height",148)}):t._e()]):t._e()])])})),t._v(" "),i("div",{staticClass:"flex flex-pack-center flex-align-center",staticStyle:{"font-size":"14px",padding:"15px"}},[t.commentList>0?i("div",[t.loading?i("div",[t._v("-")]):i("div",[t._v("加载中...")])]):t._e()])],1)},staticRenderFns:[]};var g=a("VU/8")(d,m,!1,function(t){a("aLz1")},"data-v-49f8f0fb",null);e.default=g.exports},aLz1:function(t,e){}});
//# sourceMappingURL=33.4ff6ef1e09c8f5905790.js.map